# go-solidity-obfuscator

The go-solidity-obfuscator is a Go implementation of a source-code-level obfuscator for smart contracts written in Solidity. It provides the following obfuscation features
- inserting opaque predicates into function bodies,
- inlining calls to private functions (cannot be used together with opaque predicates currently),
- comment removal,
- replacing variable names with underscore sequences, and
- replacing integer literals with arithmetic expressions.

**NOTE**: The main branch is a v1 development branch which is not fully functional and requires manual changing of the code in the `main` function in order to work. For a more usable version of the application, switch to branch `dev/version2`.

## Usage 

### Requirements

The obfuscator can currently only be built from source, which requires Go 1.19 or higher.

## Usage

The obfuscator works on a .sol contract file and a .json formatted AST file. The AST file should be generated by the [solc compiler](https://docs.soliditylang.org/en/latest/installing-solidity.html) using the `--ast-compact-json` option.

The path to the .sol and the AST are set in the `config/config.json` file.

To run the obfuscator on this branch, one needs to manually change the main function (thus, it is highly recommended to switch to branch `dev/version2`). In lines 123-127, comment out the obfuscation methods to exclude. The `ManipulateDefinedFunctionBodies` function inserts opaque predicates. The `ManipulateCalledFunctionBodies` function inlines calls to private functions. The call to one of these **must be commented out**. In line 129, set the path to the output file.